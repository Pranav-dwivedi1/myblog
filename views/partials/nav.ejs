<nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow-sm fixed-top">
  <div class="container">
    <!-- Brand/logo with optional icon -->
    <a class="navbar-brand fw-bold d-flex align-items-center" href="/">
      <i class="fas fa-blog me-2"></i> <!-- Blog icon -->
      Blogies
    </a>
    
    <!-- Mobile toggle button -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMain" 
            aria-controls="navbarMain" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    
    <!-- Main navigation -->
    <div class="collapse navbar-collapse" id="navbarMain">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link <%= (currentPath === '/') ? 'active' : '' %>" href="/">
            <i class="fas fa-home me-1 d-lg-none"></i> Home
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link <%= (currentPath === '/about') ? 'active' : '' %>" href="/about">
            <i class="fas fa-info-circle me-1 d-lg-none"></i> About
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link <%= (currentPath === '/contact') ? 'active' : '' %>" href="/contact">
            <i class="fas fa-envelope me-1 d-lg-none"></i> Contact
          </a>
        </li>

        <!-- Conditional user content -->
        <% if (locals.user) { %>
        <li class="nav-item">
          <a class="nav-link <%= (currentPath === '/blog/add-new') ? 'active' : '' %>" href="/blog/add-new">
            <i class="fas fa-plus-circle me-1 d-lg-none"></i> Add Blog
          </a>
        </li>
        <% } %>
      </ul>
      
      <!-- Right-aligned user section -->
      <div class="d-flex">
        <% if (locals.user) { %>
          <!-- User dropdown (logged in) -->
          <div class="dropdown">
            <a href="#" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" 
               id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
              <% if (user.avatar) { %>
                <img src="<%= user.avatar %>" alt="<%= user.fullName %>" width="32" height="32" 
                     class="rounded-circle me-2 object-fit-cover">
              <% } else { %>
                <div class="avatar-placeholder bg-primary rounded-circle d-flex align-items-center justify-content-center me-2" 
                     style="width: 32px; height: 32px;">
                  <%= user.fullName.charAt(0).toUpperCase() %>
                </div>
              <% } %>
              <span class="d-none d-lg-inline"><%= user.fullName %></span>
            </a>
            <ul class="dropdown-menu dropdown-menu-dark dropdown-menu-end shadow" aria-labelledby="userDropdown">
              <li><a class="dropdown-item" href="/user/profile"><i class="fas fa-user-circle me-2"></i>Profile</a></li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item text-danger" href="/user/logout"><i class="fas fa-sign-out-alt me-2"></i>Logout</a></li>
            </ul>
          </div>
        <% } else { %>
          <!-- Guest buttons -->
          <div class="btn-group" role="group">
            <a href="/user/signin" class="btn btn-outline-light me-2">
              <i class="fas fa-sign-in-alt me-1"></i> <span class="d-none d-md-inline">Login</span>
            </a>
            <a href="/user/signup" class="btn btn-primary">
              <i class="fas fa-user-plus me-1"></i> <span class="d-none d-md-inline">Sign Up</span>
            </a>
          </div>
        <% } %>
      </div>
    </div>
  </div>
</nav>

<style>
  /* Fix for fixed navbar */
  body { 
    padding-top: 70px; 
  }
  
  /* Navbar styling */
  .navbar {
    transition: all 0.3s ease;
    padding: 0.8rem 1rem;
  }
  
  /* Nav link hover and active states */
  .navbar-nav .nav-link {
    position: relative;
    padding: 0.5rem 1rem;
    margin: 0 0.2rem;
    font-weight: 500;
    transition: all 0.2s ease;
  }
  
  .navbar-nav .nav-link::after {
    content: '';
    position: absolute;
    width: 0;
    height: 2px;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    background-color: #0d6efd;
    visibility: hidden;
    transition: all 0.3s ease;
  }
  
  .navbar-nav .nav-link:hover::after,
  .navbar-nav .nav-link.active::after {
    visibility: visible;
    width: 70%;
  }
  
  .navbar-nav .nav-link:hover,
  .navbar-nav .nav-link.active {
    color: rgba(255, 255, 255, 0.9) !important;
  }
  
  /* Dropdown styling */
  .dropdown-menu {
    border: none;
    min-width: 12rem;
  }
  
  .dropdown-item {
    padding: 0.5rem 1rem;
    transition: all 0.2s ease;
  }
  
  .dropdown-item:hover {
    background-color: rgba(255, 255, 255, 0.1);
  }
  
  /* Avatar placeholder */
  .avatar-placeholder {
    color: white;
    font-weight: bold;
    font-size: 0.9rem;
  }
  
  /* Mobile menu adjustments */
  @media (max-width: 991.98px) {
    .navbar-collapse {
      padding: 1rem 0;
    }
    
    .navbar-nav {
      margin-bottom: 1rem !important;
    }
    
    .nav-link {
      padding: 0.75rem 1rem !important;
    }
    
    .nav-link::after {
      display: none;
    }
    
    .nav-link.active {
      background-color: rgba(13, 110, 253, 0.2);
      border-radius: 0.25rem;
    }
  }
</style>